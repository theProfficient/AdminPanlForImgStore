<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Post</title>
    <link rel="shortcut icon" href="assets/images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/plugin.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

          <style>
        :root {
            --blue:#252f5a;
            --indigo: #6610f2;
            --purple: #6f42c1;
            --pink: #e83e8c;
            --red: #dc3545;
            --orange: #fd7e14;
            --yellow: #ffc107;
            --green: #28a745;
            --teal: #20c997;
            --cyan: #17a2b8;
            --white: #fff;
            --gray: #6c757d;
            --gray-dark: #343a40;
            --primary:#252f5a;
            --secondary: #6c757d;
            --success: #28a745;
            --info: #17a2b8;
            --warning: #ffc107;
            --danger: #dc3545;
            --light: #f8f9fa;
            --dark: #343a40;
            --breakpoint-xs: 0;
            --breakpoint-sm: 576px;
            --breakpoint-md: 768px;
            --breakpoint-lg: 992px;
            --breakpoint-xl: 1200px;
            --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        body {
            font-family: var(--font-family-sans-serif);
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #212529;
            text-align: left;
            box-sizing: border-box;
            display: block;
        }
        .header {
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            font-family: var(--font-family-sans-serif);
            font-size: 1.1rem;
            font-weight: bold;
            line-height: 3.5;
            color: #212529;
            text-align: left;
            box-sizing: border-box;
            display: block;
        }

        .top-header,
        .mainmenu-area {
            background-color: var(--primary);
        }

        .navbar {
            background-color: var(--primary);
        }

        .navbar-light .navbar-nav .nav-link {
            color: #8D9AC0;
        }

        #userDataTable {
            width: 100%;
            border-collapse: collapse;
        }

        #userDataTable thead {
            background-color: #1ed6d6;
            color: white;
            
        }

        #userDataTable th,
        #userDataTable td {
            padding: 8px;
            border: 1px solid white;
        }
        #editUserModal label {
            margin-top: 10px;
        }

        #editUserModal .modal-body {
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }
    </style>
</head>

<body style="background-color: rgb(231, 231, 87);">
    <!-- preloader area start -->
    <div class="preloader" id="preloader">
        <div class="loader loader-1">
            <div class="loader-outter"></div>
            <div class="loader-inner"></div>
        </div>
    </div>
    <!-- preloader area end -->

    <!-- Header Area Start -->
    <header class="header">
        <!-- Top Header Area Start -->
        <section class="top-header">
            <!-- <div class="container"> -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="content">
                            <div class="left-content">
                                <ul class="left-list">
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
        </section>
        <!-- Top Header Area End -->
        <!--Main-Menu Area Start-->
        <div class="mainmenu-area">
            <!-- <div class="container"> -->
                <div class="row">
                    <div class="col-lg-12">
                        <nav class="navbar navbar-expand-lg navbar-light">
                            <!-- <div class="container-fluid p-0"> -->
                                <a class="navbar-brand" href="index.html">
                                </a>
                                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#main_menu" aria-controls="main_menu" aria-expanded="false"
                                    aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon"></span>
                                </button>
                                <div class="collapse navbar-collapse justify-content-end fixed-height"
                                    id="main_menu">
                                    <ul class="navbar-nav ml-auto">
                                        <li class="nav-item dropdown">

										</li>
                                        <li class="nav-item dropdown">
                                            <a class="nav-link" href="index.html" role="button" aria-haspopup="true"
                                                aria-expanded="false">
                                                UPLOAD IMAGES
                                                <div class="mr-hover-effect"></div>
                                            </a>
                                        </li>
                                        <li class="nav-item dropdown">
                                            <a class="nav-link" href="images.html" role="button" aria-haspopup="true"
                                                aria-expanded="false">
                                                  IMAGES
                                                <div class="mr-hover-effect"></div>
                                            </a>
                                        </li>
                                        <li class="nav-item dropdown">
                                            <a class="nav-link" href="deleteImages.html" role="button" aria-haspopup="true"
                                                aria-expanded="false">
                                                DELETE IMAGES
                                                <div class="mr-hover-effect"></div>
                                            </a>
                                        </li>
                                        <li class="nav-item dropdown">
                                            <a class="nav-link" href="userData.html" role="button" aria-haspopup="true"
                                                aria-expanded="false">
                                                USER DATA
                                                <div class="mr-hover-effect"></div>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            <!-- </div> -->
                        </nav>
                    </div>
                </div>
            <!-- </div> -->
        </div>
        <!--Main-Menu Area Start-->
    </header>
<!-- Header Area End -->

    <!-- Edit User Modal -->
    <div class="modal fade" id="editUserModal" tabindex="-1" role="dialog" aria-labelledby="editUserModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="editUserForm">
                        <div class="form-group">
                            <label for="editUserName">UserName</label>
                            <input type="text" class="form-control" id="editUserName" name="userName" required>
                        </div>
                        <div class="form-group">
                            <label for="editEmail">Email</label>
                            <input type="text" class="form-control" id="editEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="editWhatsAppNumber">WhatsApp Number</label>
                            <input type="text" class="form-control" id="editWhatsAppNumber" name="whatsAppNumber"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="editRealMoney">Real Money</label>
                            <input type="text" class="form-control" id="editRealMoney" name="realMoney" required>
                        </div>
                        <div class="form-group">
                            <label for="editFacebookId">Facebook ID</label>
                            <input type="text" class="form-control" id="editFacebookId" name="facebookId" required>
                        </div>
                        <div class="form-group">
                            <label for="editInstaId">Instagram ID</label>
                            <input type="text" class="form-control" id="editInstaId" name="instaId" required>
                        </div>
                        <div class="form-group">
                            <label for="editCredits">Credits</label>
                            <input type="text" class="form-control" id="editCredits" name="credits" required>
                        </div>
                        <div class="form-group">
                            <label for="editIsActive">Is Active</label>
                            <input type="text" class="form-control" id="editIsActive" name="isActive" required>
                        </div>

                        <button type="button" class="btn btn-primary" id="saveChangesBtn">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

  
<section>
    <div class="col-lg-8">
        <div>
            <table id="userDataTable" class="table">
                <thead>
                    <tr>
                        <th>Sr.No</th>
                        <th>UserId</th>
                        <th>Edit</th>
                        <th>UserName</th>
                        <th>Email</th>
                        <th>WhatsAppNub</th>
                        <th>ReferralCode</th>
                        <th>RealMoney</th>
                        <th>FacebookId</th>
                        <th>InstaId</th>
                        <th>Credits</th>
                        <th>IsActive</th>          
                    </tr>
                </thead>
                <tbody>
                    <!-- User data will be dynamically added here -->
                </tbody>
            </table>
        </div>
    </div>
</section>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

   <!-- Existing code... -->

   <script>
    $(document).ready(function () {
        var selectedUserId;

        function populateEditForm(user) {
            $('#editUserName').val(user.userName);
            $('#editEmail').val(user.email);
            $('#editWhatsAppNumber').val(user.whatsAppNumber);
            $('#editRealMoney').val(user.realMoney);
            $('#editFacebookId').val(user.facebookId);
            $('#editInstaId').val(user.instaId);
            $('#editCredits').val(user.credits);
            $('#editIsActive').val(user.isActive);
        }

        function fetchUserDataTable() {
            $.get("https://imagestoreazure.azurewebsites.net/getAllUser", function (userData) {
                var userDataTable = $('#userDataTable tbody');
                userDataTable.empty();
                $.each(userData, function (index, user) {
                    userDataTable.append('<tr>' +
                        '<td>' + (index + 1) + '</td>' + 
                        '<td>' + user.UserId + '</td>' +
                        '<td><button class="btn btn-info edit-btn" data-toggle="modal" data-target="#editUserModal" data-user-id="' + user.UserId + '">Edit</button></td>' +
                        '<td>' + user.userName + '</td>' +
                        '<td>' + user.email + '</td>' +
                        '<td>' + user.whatsAppNumber + '</td>' +
                        '<td>' + user.referralCode + '</td>' +
                        '<td>' + user.realMoney + '</td>' +
                        '<td>' + user.facebookId + '</td>' +
                        '<td>' + user.instaId + '</td>' +
                        '<td>' + user.credits + '</td>' +
                        '<td>' + user.isActive + '</td>' +
                        '</tr>');
                });

                $('.edit-btn').click(function () {
                    selectedUserId = $(this).data('user-id');
                    var user = userData.find(u => u.UserId === selectedUserId);
                    populateEditForm(user);
                });
            });
        }

        fetchUserDataTable();


        $('.form-control').focus(function () {
        selectedFieldName = $(this).attr('name');
    });

    $('#saveChangesBtn').click(function () {
        var editedUserData = {
            userId: selectedUserId,
            userName: $('#editUserName').val(),
            email: $('#editEmail').val(),
            whatsAppNumber: $('#editWhatsAppNumber').val(),
            realMoney: $('#editRealMoney').val(),
            facebookId: $('#editFacebookId').val(),
            instaId: $('#editInstaId').val(),
            credits: $('#editCredits').val(),
            isActive: $('#editIsActive').val(),
        };

        // Update API URL with UserId and fields in query parameters
        var updateApiUrl = "https://imagestoreazure.azurewebsites.net/updateUser?UserId=" + selectedUserId + "&" + selectedFieldName + "=" + editedUserData[selectedFieldName];

        $.ajax({
            url: updateApiUrl,
            type: 'PUT',
            data: editedUserData,
            success: function (response) {
                console.log(response);
                $('#editUserModal').modal('hide');
                fetchUserDataTable();
            }
        });
    });
});
</script>
</body>

</html>
